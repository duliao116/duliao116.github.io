---
title: 20210908日记
tags:
  - 日记
---
## 工作
### 设计
经过沟通，lu已经把流程定义的表结构、流程实例的表结构给定义了出来，符合我的想法，流程的数据存一个大的json和xml，不再拆分成多个数据库表解构。但是这种设计避免了一种复杂性，就引入了另一种复杂性，涉及到子流程、场景的引用，就需要把其真正的定义都统一存储起来。好在流程都是单个操作，不存在批量做上面操作的事情，倒是可以这么处理，不然，单单一个更新操作就会引起一堆麻烦。

暂定这样，明天再看看详细的数据库设计和相关文档，整理下各个任务节点展示的东西，流程运行、历史流程查看的详细细节。

### 修复bug
不幸的是，又发现了一个我写的bug，限流组件的。

我需要学习一下如何写覆盖各种场景的单元测试，这又是一个漏过去的bug。纵使写了单元测试，但方法不对，代码覆盖率、分支覆盖率高也没用，本该暴漏出来的问题还是隐藏着，不知何时出来给你致命一击。

保护自己，珍爱生命，写好单元测试。

### DDD
今天和lu沟通的时候，简单讨论了DDD的事情，发现其实都没有理解的很深入，我们都认为需要实践一把，积累经验方可得到自己的总结、知识。这次做调度器倒是可以尝试，都是高手，沟通顺畅，尝试一下也不会造成特别差的结果。

## 生活

孩子昨晚手术之后有点病怏怏的，这两天明显好转了，精神和体力都好了很多，完全恢复指日可待。只是辛苦了老妈，一个人带孩子还是很累的，精神头和脸色明显不如老爸在这边一起带的时候，希望孩子早点好起来早点开学吧。

妹妹公司的退税麻烦也结解了，终于不用再那么闹心，我也可以放心点。一直状态不好我也不放心出差去北京呀。


